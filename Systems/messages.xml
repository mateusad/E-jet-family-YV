<PropertyList>

    <logic>
        <input>
            <or>
                <and>
                    <property>/gear/gear[1]/wow</property>
                    <or>
                        <greater-than>
                            <property>/controls/engines/engine[0]/throttle</property>
                            <value>0.5</value>
                        </greater-than>
                        <greater-than>
                            <property>/controls/engines/engine[1]/throttle</property>
                            <value>0.5</value>
                        </greater-than>
                    </or>
                </and>
                <property>/controls/flight/takeoff-config-check</property>
            </or>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/checking</output>
    </logic>

    <flipflop>
        <type>RS</type>
        <S>
            <property>/instrumentation/eicas/messages/no-takeoff/ok</property>
        </S>
        <R>
            <or>
                <property>/instrumentation/eicas/messages/no-takeoff/flaps</property>
                <property>/instrumentation/eicas/messages/no-takeoff/brakes</property>
                <property>/instrumentation/eicas/messages/no-takeoff/spoiler</property>
                <property>/instrumentation/eicas/messages/no-takeoff/trim</property>
            </or>
        </R>
        <output>/instrumentation/eicas/messages/no-takeoff/checked</output>
    </flipflop>

    <logic>
        <input>
            <not-equals>
                <property>/fms/takeoff-conditions/flaps</property>
                <property>/controls/flight/flaps</property>
            </not-equals>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/flaps</output>
    </logic>
    <logic>
        <input>
            <not-equals>
                <property>/autopilot/autobrake/step</property>
                <value>-1</value>
            </not-equals>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/brakes</output>
    </logic>

    <logic>
        <input>
            <or>
                <greater-than>
                    <property>/controls/flight/ground-spoilers</property>
                    <value>0.001</value>
                </greater-than>
                <greater-than>
                    <property>/controls/flight/speedbrake-lever</property>
                    <value>0.001</value>
                </greater-than>
            </or>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/spoiler</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>/instrumentation/eicas/messages/no-takeoff/checking</property>
                <or>
                    <property>/instrumentation/eicas/messages/no-takeoff/flaps</property>
                    <property>/instrumentation/eicas/messages/no-takeoff/brakes</property>
                    <property>/instrumentation/eicas/messages/no-takeoff/spoiler</property>
                    <property>/instrumentation/eicas/messages/no-takeoff/trim</property>
                    <not><property>/gear/gear[1]/wow</property></not>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/master</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>/instrumentation/eicas/messages/no-takeoff/master</property></not>
                <property>/controls/flight/takeoff-config-check</property>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/no-takeoff/ok</output>
    </logic>


    <logic>
        <input>
            <and>
                <property>/controls/gear/brake-parking</property>
                <or>
                    <greater-than>
                        <property>/controls/engines/engine[0]/throttle</property>
                        <value>0.1</value>
                    </greater-than>
                    <greater-than>
                        <property>/controls/engines/engine[1]/throttle</property>
                        <value>0.1</value>
                    </greater-than>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/parking-brake</output>
    </logic>
    
    <logic>
        <input>
            <and>
                <less-than>
                    <property>/instrumentation/transponder/inputs/knob-mode</property>
                    <value>2</value>
                </less-than>
                <not>
                    <property>/gear/gear[1]/wow</property>
                </not>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/xpdr-stby</output>
    </logic>
    
    <logic>
        <input>
            <less-than>
                <property>/consumables/fuel/tank[0]/level-kg</property>
                <value>400</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/messages/fuel-low-left</output>
    </logic>
    <logic>
        <input>
            <less-than>
                <property>/consumables/fuel/tank[1]/level-kg</property>
                <value>400</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/messages/fuel-low-right</output>
    </logic>
    <flipflop>
        <type>RS</type>
        <S>
            <greater-than>
                <expression>
                    <abs>
                        <difference>
                            <property>/consumables/fuel/tank[0]/level-kg</property>
                            <property>/consumables/fuel/tank[1]/level-kg</property>
                        </difference>
                    </abs>
                </expression>
                <value>360</value>
            </greater-than>
        </S>
        <R>
            <less-than>
                <expression>
                    <abs>
                        <difference>
                            <property>/consumables/fuel/tank[0]/level-kg</property>
                            <property>/consumables/fuel/tank[1]/level-kg</property>
                        </difference>
                    </abs>
                </expression>
                <value>45</value>
            </less-than>
        </R>
        <output>/instrumentation/eicas/messages/fuel-imbalance</output>
    </flipflop>

    <logic>
        <input>
            <and>
                <not><property>/instrumentation/eicas/messages/fuel-imbalance</property></not>
                <property>/systems/fuel/crossfeed-valve</property>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/fuel-equal-xfeed-open</output>
    </logic>

<logic>
    <input>
        <and>
            <not><property>sim/model/door-positions/l1/closed</property></not>
            <or>
                <not><property>/gear/gear[1]/wow</property></not>
                <property>/engines/engine[0]/running</property>
                <property>/engines/engine[1]/running</property>
            </or>
        </and>
    </input>
    <output>/instrumentation/eicas/messages/doors/l1/open</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>sim/model/door-positions/l2/closed</property></not>
                <or>
                    <not><property>/gear/gear[1]/wow</property></not>
                    <property>/engines/engine[0]/running</property>
                    <property>/engines/engine[1]/running</property>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/doors/l2/open</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>sim/model/door-positions/r1/closed</property></not>
                <or>
                    <not><property>/gear/gear[1]/wow</property></not>
                    <property>/engines/engine[0]/running</property>
                    <property>/engines/engine[1]/running</property>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/doors/r1/open</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>sim/model/door-positions/r2/closed</property></not>
                <or>
                    <not><property>/gear/gear[1]/wow</property></not>
                    <property>/engines/engine[0]/running</property>
                    <property>/engines/engine[1]/running</property>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/doors/r2/open</output>
    </logic>

    <logic>
        <input>
            <and>
                <or>
                    <not><property>/systems/electrical/buses/ac[1]/powered</property></not>
                    <not><property>/systems/electrical/buses/ac[2]/powered</property></not>
                </or>
                <or>
                    <not><property>/gear/gear[0]/wow</property></not>
                    <not><property>/gear/gear[1]/wow</property></not>
                    <not><property>/gear/gear[2]/wow</property></not>
                </or>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/electrical/emergency</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>/controls/electric/external-power-connected</property>
                <not><property>/controls/gear/brake-parking</property></not>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/electrical/external-power-connected</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>/controls/electric/battery-switch[0]/</property></not>
                <not><property>/controls/electric/battery-switch[1]/</property></not>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/electrical/batteries-off</output>
    </logic>
    <logic>
        <input><property>/engines/apu/shutting-down</property></input>
        <output>/instrumentation/eicas/messages/apu/shutdown</output>
    </logic>

    <logic>
        <input>
            <not>
                <equals>
                    <property>/systems/electrical/sources/generator[1]/status</property>
                    <value>1</value>
                </equals>
            </not>
        </input>
        <output>/instrumentation/eicas/messages/electrical/idg1</output>
    </logic>
    <logic>
        <input>
            <not>
                <equals>
                    <property>/systems/electrical/sources/generator[2]/status</property>
                    <value>1</value>
                </equals>
            </not>
        </input>
        <output>/instrumentation/eicas/messages/electrical/idg2</output>
    </logic>

    <logic>
        <input>
            <and>
                <or>
                    <property>/instrumentation/iru[0]/signals/aligning</property>
                    <property>/instrumentation/iru[1]/signals/aligning</property>
                </or>
                <greater-than>
                    <property>/velocities/groundspeed-kt</property>
                    <value>0.1</value>
                </greater-than>
            </and>
        </input>
        <output>/instrumentation/eicas/messages/iru-excessive-motion</output>
    </logic>

    <logic>
        <input>
            <greater-than>
                <property>systems/electrical/outputs/eicas</property>
                <value>21</value>
            </greater-than>
        </input>
        <output>/instrumentation/eicas/signals/elec-power</output>
    </logic>

    <logic>
        <input>
            <or>
                <greater-than>
                    <property>controls/engines/engine[0]/throttle</property>
                    <property>fadec/configuration/throttle-toga-norm</property>
                </greater-than>
                <greater-than>
                    <property>controls/engines/engine[1]/throttle</property>
                    <property>fadec/configuration/throttle-toga-norm</property>
                </greater-than>
            </or>
        </input>
        <output>/instrumentation/eicas/signals/takeoff-power</output>
    </logic>

    <logic>
        <input>
            <or>
                <property>/engines/engine[0]/running</property>
                <property>/engines/engine[1]/running</property>
            </or>
        </input>
        <output>/instrumentation/eicas/signals/engines-running</output>
    </logic>

    <logic>
        <input>
            <greater-than>
                <property>/velocities/groundspeed-kt</property>
                <value>80</value>
            </greater-than>
        </input>
        <output>/instrumentation/eicas/signals/above80knots</output>
    </logic>

    <logic>
        <input>
            <less-than>
                <property>position/gear-agl-ft</property>
                <value>200</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/signals/below200ft</output>
    </logic>

    <logic>
        <input>
            <greater-than>
                <property>position/gear-agl-ft</property>
                <value>400</value>
            </greater-than>
        </input>
        <output>/instrumentation/eicas/signals/above400ft</output>
    </logic>

    <logic>
        <input>
            <less-than>
                <property>gear/unit[0]/wheel-speed-fps</property>
                <!-- 30 knots ~= 50.6 fps -->
                <value>50.6</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/signals/below30kt</output>
    </logic>

    <filter>
                <greater-than>
                    <property>controls/engines/engine[1]/target</property>
                    <property>fadec/configuration/throttle-toga-norm</property>
                </greater-than>
        <type>noise-spike</type>
        <input>/gear/gear[1]/wow</input>
        <max-rate-of-change>0.0333333</max-rate-of-change>
        <output>/instrumentation/eicas/signals/landed-30sec</output>
    </filter>

    <logic>
        <input>
            <and>
                <greater-than>
                    <property>/instrumentation/eicas/signals/landed-30sec</property>
                    <value>0.99999</value>
                </greater-than>
                <property>/instrumentation/eicas/signals/below30kt</property>
            </and>
        </input>
        <output>/instrumentation/eicas/signals/landed</output>
    </logic>

    <flipflop>
        <type>monostable</type>
        <S><property>/cpdlc/incoming</property></S>
        <time>1.0</time>
        <output>/instrumentation/eicas/master/cpdlc-incoming</output>
    </flipflop>

    <logic>
        <input>
            <and>
                <not><property>/systems/pressurization/packs/pack[0]/running</property></not>
                <not><property>/gear/gear[0]/wow</property></not>
            </and>
        </input>
        <output>/instrumentation/eicas/signals/pack-off[0]</output>
    </logic>
    <logic>
        <input>
            <and>
                <not><property>/systems/pressurization/packs/pack[1]/running</property></not>
                <not><property>/gear/gear[0]/wow</property></not>
            </and>
        </input>
        <output>/instrumentation/eicas/signals/pack-off[1]</output>
    </logic>

    <logic>
        <input>
            <less-than>
                <property>/systems/pneumatic/buses/fcv[0]</property>
                <value>20</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/signals/bleed-fail[0]</output>
    </logic>
    <logic>
        <input>
            <less-than>
                <property>/systems/pneumatic/buses/fcv[1]</property>
                <value>20</value>
            </less-than>
        </input>
        <output>/instrumentation/eicas/signals/bleed-fail[1]</output>
    </logic>

</PropertyList>
