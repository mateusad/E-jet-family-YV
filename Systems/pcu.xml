<?xml version="1.0" encoding="utf-8"?>

<PropertyList>
    <!-- even/odd day priority logic -->
    <logic>
        <input>
            <not><property>systems/actuators/odd-day</property></not>
        </input>
        <output>systems/actuators/elevator/pcu[0]/priority</output>
        <output>systems/actuators/elevator/pcu[2]/priority</output>
        <output>systems/actuators/rudder/pcu[1]/priority</output>
    </logic>
    <logic>
        <input>
            <property>systems/actuators/odd-day</property>
        </input>
        <output>systems/actuators/elevator/pcu[1]/priority</output>
        <output>systems/actuators/elevator/pcu[3]/priority</output>
        <output>systems/actuators/rudder/pcu[0]/priority</output>
    </logic>


    <!-- PCU availability -->
    <logic>
        <input>
            <property>systems/hydraulic/system[0]/pressurized</property>
        </input>
        <output>systems/actuators/elevator/pcu[0]/available</output>
        <output>systems/actuators/rudder/pcu[0]/available</output>
    </logic>
    <logic>
        <input>
            <property>systems/hydraulic/system[1]/pressurized</property>
        </input>
        <output>systems/actuators/elevator/pcu[1]/available</output>
        <output>systems/actuators/elevator/pcu[2]/available</output>
        <output>systems/actuators/aileron/pcu[1]/available</output>
        <output>systems/actuators/aileron/pcu[2]/available</output>
    </logic>
    <logic>
        <input>
            <property>systems/hydraulic/system[2]/pressurized</property>
        </input>
        <output>systems/actuators/elevator/pcu[3]/available</output>
        <output>systems/actuators/aileron/pcu[0]/available</output>
        <output>systems/actuators/aileron/pcu[3]/available</output>
        <output>systems/actuators/rudder/pcu[1]/available</output>
    </logic>

    <!-- Active PCU selection -->
    <logic>
        <input>
            <and>
                <property>systems/actuators/elevator/pcu[0]/available</property>
                <or>
                    <property>systems/actuators/elevator/pcu[0]/priority</property>
                    <not><property>systems/actuators/elevator/pcu[1]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/elevator/pcu[0]/active</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>systems/actuators/elevator/pcu[1]/available</property>
                <or>
                    <property>systems/actuators/elevator/pcu[1]/priority</property>
                    <not><property>systems/actuators/elevator/pcu[0]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/elevator/pcu[1]/active</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>systems/actuators/elevator/pcu[2]/available</property>
                <or>
                    <property>systems/actuators/elevator/pcu[2]/priority</property>
                    <not><property>systems/actuators/elevator/pcu[3]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/elevator/pcu[2]/active</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>systems/actuators/elevator/pcu[3]/available</property>
                <or>
                    <property>systems/actuators/elevator/pcu[3]/priority</property>
                    <not><property>systems/actuators/elevator/pcu[2]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/elevator/pcu[3]/active</output>
    </logic>

    <logic>
        <input><property>systems/actuators/aileron/pcu[0]/available</property></input>
        <output>systems/actuators/aileron/pcu[0]/active</output>
    </logic>
    <logic>
        <input><property>systems/actuators/aileron/pcu[1]/available</property></input>
        <output>systems/actuators/aileron/pcu[1]/active</output>
    </logic>
    <logic>
        <input><property>systems/actuators/aileron/pcu[2]/available</property></input>
        <output>systems/actuators/aileron/pcu[2]/active</output>
    </logic>
    <logic>
        <input><property>systems/actuators/aileron/pcu[3]/available</property></input>
        <output>systems/actuators/aileron/pcu[3]/active</output>
    </logic>

    <logic>
        <input>
            <and>
                <property>systems/actuators/rudder/pcu[0]/available</property>
                <or>
                    <property>systems/actuators/rudder/pcu[0]/priority</property>
                    <not><property>systems/actuators/rudder/pcu[1]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/rudder/pcu[0]/active</output>
    </logic>
    <logic>
        <input>
            <and>
                <property>systems/actuators/rudder/pcu[1]/available</property>
                <or>
                    <property>systems/actuators/rudder/pcu[1]/priority</property>
                    <not><property>systems/actuators/rudder/pcu[0]/available</property></not>
                </or>
            </and>
        </input>
        <output>systems/actuators/rudder/pcu[1]/active</output>
    </logic>

    <!-- PCU operational states (-1 = failed, 0 = standby, 1 = active) -->
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[0]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[0]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/elevator/pcu[0]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[1]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[1]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/elevator/pcu[1]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[2]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[2]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/elevator/pcu[2]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[3]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/elevator/pcu[3]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/elevator/pcu[3]/status</output>
    </filter>

    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[0]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[0]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/aileron/pcu[0]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[1]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[1]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/aileron/pcu[1]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[2]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[2]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/aileron/pcu[2]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[3]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/aileron/pcu[3]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/aileron/pcu[3]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/rudder/pcu[0]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/rudder/pcu[0]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/rudder/pcu[0]/status</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/rudder/pcu[1]/active</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <condition>
                <property>systems/actuators/rudder/pcu[1]/available</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>-1</value>
        </input>
        <output>systems/actuators/rudder/pcu[1]/status</output>
    </filter>

    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/odd-day</property>
            </condition>
            <value>1</value>
        </input>
        <input>
            <value>0</value>
        </input>
        <output>systems/actuators/elevator/hydraulic-system[0]</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/odd-day</property>
            </condition>
            <value>2</value>
        </input>
        <input>
            <value>1</value>
        </input>
        <output>systems/actuators/elevator/hydraulic-system[1]</output>
    </filter>
    <filter>
        <type>gain</type>
        <input>
            <condition>
                <property>systems/actuators/odd-day</property>
            </condition>
            <value>0</value>
        </input>
        <input>
            <value>2</value>
        </input>
        <output>systems/actuators/rudder/hydraulic-system</output>
    </filter>
</PropertyList>
